@inject Manager manager

<DropdownComponent SelectedItemId="ProjectId" OnItemUpdate="UpdateProject" Items="Items" />

@code {
    [Parameter]
    public required List<Project> Projects { get; set; }

    [Parameter]
    public int ProjectId { get; set; } = 0;

    public Project? Project { get; set; }

    [Parameter]
    public EventCallback<int> OnProjectUpdate { get; set; }

    public Dictionary<int, string> Items { get; set; } = [];


    protected override void OnParametersSet()
    {
        if(ProjectId != 0)
        {
            Project = manager.ProjectDB.GetByIdAsync(ProjectId).Result;
        }
        base.OnParametersSet();
    }
    protected override void OnInitialized()
    {
        Items = [];
        foreach (var item in Projects)
        {
            string name = string.IsNullOrWhiteSpace(item.DesignCode) ? item.ProjectName : item.DesignCode;
            if (name == "0")
            {
                name = item.ProjectName;
            }
            Items[item.ProjectId] = name;
        }
        base.OnInitialized();
    }

    private void UpdateProject(int employeeId)
    {
        ProjectId = employeeId;
        OnProjectUpdate.InvokeAsync(employeeId);
    }

}
 